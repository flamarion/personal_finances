{% extends 'admin.html' %}

{% block title %}Accounts{% endblock %}

{% block new_record %}
<h3>Add New Account</h3>
{% for message in get_flashed_messages(category_filter=["success"]) %}
    {% if message %}
        <div class="alert alert-success" role="alert">
            {{ message }}
        </div>
    {% endif %}
{% endfor %}

<form method="POST" action="{{ request.path }}">
    <div class="form-group">
        <div class="form-group">
            <label for="accountName">Account Name</label>
            <input type="text" class="form-control" id="accountName" name="accountName" placeholder="ING" required>
        </div>
        <div class="form-group">
            <label for="accountType">Account Type</label>
            <input type="text" class="form-control" id="accountType" name="accountType" placeholder="Checking" required>
        </div>
        <div class="form-group">
            <label for="accountBalance">Initial Balance</label>
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroupPrepend2">â‚¬</span>
                </div>
                <input type="text" class="form-control" id="accountBalance" name="accountBalance" 
                    placeholder="10.00" aria-describedby="inputGroupPrepend2" required>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Add Account</button>
    </div>
</form>
{% endblock %}

{% block list_records %}
<h3>All Accounts</h3>

{% for message in get_flashed_messages(category_filter=["critical"]) %}
    {% if message %}
        <div class="alert alert-danger" role="alert">
            {{ message }}
        </div>
    {%- endif %}
{% endfor %}

<table class="table">
    <thead>
        <tr>
            <th scope="col">Account Name</th>
            <th scope="col">Account Type</th>
            <th scope="col">Balance</th>
            <th scope="col">Edit</th>
        </tr>
    </thead>
    <tbody>
        {% for account in accounts %}
        <tr>
            <td>{{ account.name }}</td>
            <td>{{ account.acct_type }}</td>
            <td>{{ account.balance }}</td>
            <td>
                <a class="btn btn-danger btn-sm" href="{{ url_for('admin.adm_accounts', op='remove', id=account.id) }}" role="button" id="rmacct">Remove</button>
                <a class="btn btn-primary btn-sm" href="{{ url_for('admin.adm_accounts', op='edit', id=account.id) }}" role="button" id="editacct">Edit</button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}